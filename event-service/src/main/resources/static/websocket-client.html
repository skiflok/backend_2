<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>WebSocket Test Client</title>
    <style>
        body { font-family: sans-serif; padding: 1rem; }
        #stockLog, #priceLog {
          width: 45%; display: inline-block; vertical-align: top;
          background: #f0f0f0; padding: 1rem; height: 200px; overflow-y: scroll;
          border: 1px solid #ccc; margin-right: 5%;
        }
        h2 { margin-top: 0; }
    </style>
</head>
<body>
<h1>WebSocket Client</h1>
<div>
    <div id="stockLog">
        <h2>Stock Updates</h2>
    </div>
    <div id="priceLog">
        <h2>Price Updates</h2>
    </div>
</div>

<script>
    const stockLog = document.getElementById('stockLog');
    const priceLog = document.getElementById('priceLog');

    function append(el, msg) {
      const p = document.createElement('div');
      p.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
      el.appendChild(p);
      el.scrollTop = el.scrollHeight;
    }

    // WS –¥–ª—è stock
    const wsStock = new WebSocket('ws://localhost:9997/ws-stock-updates');
    wsStock.onopen = () => append(stockLog, 'üü¢ Connected to /ws-stock-updates');
    wsStock.onmessage = e => append(stockLog, `üìâ ${e.data}`);
    wsStock.onerror   = e => append(stockLog, `‚ùå Error: ${e.message}`);

    // WS –¥–ª—è price
    const wsPrice = new WebSocket('ws://localhost:9997/ws-price-updates');
    wsPrice.onopen    = () => append(priceLog, 'üü¢ Connected to /ws-price-updates');
    wsPrice.onmessage = e => append(priceLog, `üí∞ ${e.data}`);
    wsPrice.onerror   = e => append(priceLog, `‚ùå Error: ${e.message}`);
</script>
</body>
</html>
